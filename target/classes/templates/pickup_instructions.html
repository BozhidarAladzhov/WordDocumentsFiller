<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Instructions USA</title>
    <link rel="stylesheet" href="/css/app.css">
</head>

<body>
<div th:replace="fragments/navbar :: main-nav"></div>


    <div class="container">
        <h1>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –≤—ä—Ç—Ä–µ—à–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ –°–ê–©</h1>

        <form onsubmit="return false;">
            <div class="grid">
                <div>
                    <label>Place</label>
                    <select id="place" onchange="handlePlaceChange()">
                        <option value="Copart">Copart</option>
                        <option value="IAAI">IAAI</option>
                        <option value="Private address">Private address</option>
                    </select>
                </div>

                <div>
                    <label>Vehicle</label>
                    <input type="text" id="vehicle" />
                </div>

                <div>
                    <label>VIN</label>
                    <input type="text" id="vin" />
                </div>

                <div id="lotStockWrap">
                    <label id="lotStockLabel">LOT</label>
                    <input type="text" id="lotStockValue" />
                </div>

                <!-- PIN WRAP -->
                <div id="pinWrap">
                    <label id="pinLabel">GATE PASS PIN</label>
                    <input type="text" id="pinValue" />
                </div>

                <div>
                    <label id="locationLabel">Location</label>
                    <input type="text" id="locationValue" />
                </div>

                <div id="privateFields" class="hidden" style="grid-column: 1 / -1;">
                    <div class="grid">
                        <div>
                            <label>Contact</label>
                            <input type="text" id="contact" />
                        </div>
                        <div>
                            <label>Phone number</label>
                            <input type="text" id="phone" />
                        </div>
                        <div style="grid-column: 1 / -1;">
                            <label>Items in the car</label>
                            <select id="itemsInCar">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div>
                    <label>To terminal</label>
                    <input type="text" id="toTerminal" />
                </div>

                <div style="grid-column: 1 / -1;">
                    <label>Special requirements</label>
                    <textarea id="specialReq"></textarea>
                </div>
            </div>

            <div class="btn-row">
                <button onclick="generateText()">Generate</button>
                <button class="btn-secondary" onclick="copyGeneratedText()">Copy</button>
                <button class="btn-ghost" onclick="resetForm()">Reset</button>
            </div>
        </form>

        <div id="resultBox" class="resultBox">
            <p id="resultText"></p>
            <div id="copiedToast" class="copied">‚úÖ Copied!</div>
        </div>

        <textarea id="plainTextOut" style="position:absolute; left:-9999px;"></textarea>
    </div>

    <script>
        function handlePlaceChange() {
            const place = document.getElementById("place").value;

            document.getElementById("lotStockWrap").classList.toggle("hidden", place === "Private address");
            document.getElementById("pinWrap").classList.toggle("hidden", place === "Private address");
            document.getElementById("privateFields").classList.toggle("hidden", place !== "Private address");

            document.getElementById("lotStockLabel").textContent = place === "IAAI" ? "STOCK" : "LOT";
            document.getElementById("pinLabel").textContent = place === "IAAI" ? "PICK UP PIN" : "GATE PASS PIN";
            document.getElementById("locationLabel").textContent = place === "Private address" ? "Address" : "Location";
        }

        function generateText() {
            const place = document.getElementById("place").value;
            const lines = [];

            lines.push(`<strong>${place}</strong><br>`);
            lines.push(`üöò <strong>Vehicle:</strong> ${vehicle.value}<br>`);
            lines.push(`üé´ <strong>VIN:</strong> ${vin.value}<br>`);

            if (place !== "Private address") {
                lines.push(`üîé <strong>${lotStockLabel.textContent}:</strong> ${lotStockValue.value}<br>`);
                if (pinValue.value) {
                    lines.push(`üîé <strong>${pinLabel.textContent}:</strong> ${pinValue.value}<br>`);
                }
            }

            lines.push(`${place === "Private address" ? "üè†" : "üìç"} <strong>${locationLabel.textContent}:</strong> ${locationValue.value}<br>`);

            if (place === "Private address") {
                lines.push(`üë§ <strong>Contact:</strong> ${contact.value}<br>`);
                lines.push(`üìû <strong>Phone:</strong> ${phone.value}<br>`);
                lines.push(`üì¶ <strong>Items in the car:</strong> ${itemsInCar.value}<br>`);
            }

            lines.push(`üïã <strong>To terminal:</strong> ${toTerminal.value}<br>`);
            lines.push(`üìã <strong>Special requirements:</strong> ${specialReq.value || "None"}<br>`);

            resultText.innerHTML = lines.join("");
            plainTextOut.value = resultText.innerText;
            resultBox.style.display = "block";
        }

        function copyGeneratedText() {
            navigator.clipboard.writeText(plainTextOut.value);
            copiedToast.style.display = "block";
            setTimeout(() => copiedToast.style.display = "none", 1500);
        }

        function resetForm() {
            document.querySelector("form").reset();
            resultBox.style.display = "none";
            handlePlaceChange();
        }

        handlePlaceChange();
    </script>
    <script src="/js/app.js"></script>
</body>
</html>